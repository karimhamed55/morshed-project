@using Morshed.Core.Entities
@model IEnumerable<Place>

@{
    Layout = "_AdminLayout"; 
    ViewData["Title"] = "Manage Places";
}

<link rel="stylesheet" href="~/css/admin_create.css?v=3.0">
<link href="[https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400..700&family=Poppins:wght@300;400;500;600&display=swap](https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400..700&family=Poppins:wght@300;400;500;600&display=swap)" rel="stylesheet">


<div class="container">

    <!-- Header -->
    <div class="admin-header">
        <h2>Tourist Sites</h2>
        <p>Curate the best destinations for travelers</p>
    </div>

    <!-- Action Bar -->
    <div class="page-action-header">
        <h4 style="font-family:'Playfair Display'; color:var(--primary-dark); margin:0;">All Places (@Model.Count())</h4>
        <a asp-action="CreatePlace" class="btn-add-main">
            <i class="fas fa-plus"></i> Add New Place
        </a>
    </div>

    <!-- The Table Card -->
    <div class="admin-table-container">
        @if (Model != null && Model.Any())
        {
            <table class="table">
                <thead>
                    <tr>
                        <th>Name</th>
                        <th>Category</th>
                        <th style="width: 40%;">Description</th>
                        <th class="text-center">Actions</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var item in Model)
                    {
                        <tr>
                            <td style="font-weight: 600; color: var(--primary-dark);">@item.Name</td>
                            <td>
                                <span class="badge rounded-pill bg-light text-dark border">@item.Category</span>
                            </td>
                            <td>
                                @{
                                    var description = item.Description;
                                    if (!string.IsNullOrEmpty(description) && description.Length > 80)
                                    {
                                        description = description.Substring(0, 80) + "...";
                                    }
                                }
                                <span class="text-muted">@description</span>
                            </td>
                            <td class="text-center">
                                <a asp-action="EditPlace" asp-route-id="@item.Id" class="btn-action-sm btn-edit" title="Edit">
                                    <i class="fas fa-edit"></i>
                                </a>

                                <form asp-action="DeletePlace" asp-route-id="@item.Id" method="post" style="display:inline;" onsubmit="return confirm('Are you sure you want to delete this place?');">
                                    <button type="submit" class="btn-action-sm btn-delete" title="Delete">
                                        <i class="fas fa-trash-alt"></i>
                                    </button>
                                </form>
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        }
        else
        {
            <div class="text-center py-5">
                <i class="fas fa-map-marked-alt fa-3x text-muted mb-3"></i>
                <h4 class="text-muted">No places found.</h4>
                <p class="text-muted">Start by adding a new tourist site to the database.</p>
                <a asp-action="CreatePlace" class="btn-add-main mt-3">Add First Place</a>
            </div>
        }
    </div>

</div>